<app-restaurant-navbar></app-restaurant-navbar>

<br>
<div *ngIf="restaurantId">
  <h2 class="display-4 fw-bolder mb-2 menu-title">{{restaurantName}}</h2>
  <h2>Availabe Menu Items</h2>
</div>

<div class="menu-container">
  <div class="menu-items-list">
    <div *ngFor="let item of menuItems" class="menu-item-card">
      <img [src]="item.image_url" alt="{{ item.name }}" class="menu-item-image">
      <div class="item-details">
        <h4>{{ item.name }}</h4>
        <p>Price: ₹{{ item.price }}</p>
      </div>
      <div class="item-actions">
        <button (click)="edit(item)">Edit</button>
        <button (click)="deleteItem(item.id)">Delete</button>
      </div>
    </div>
  </div>

  <hr>

  <div class="add-button">
    <button class="btn add-btn" (click)="showAddForm = !showAddForm">
      {{ showAddForm ? '❌ Cancel Add' : '➕ Add New Item' }}
    </button>
  </div>
  <div *ngIf="showAddForm" class="add-panel mt-4 p-4 bg-light rounded shadow-sm">
    <h5 class="mb-3">➕ Add New Menu Item</h5>
    
    <form [formGroup]="itemForm" (ngSubmit)="addItem()">
      <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" id="name" formControlName="name" required>
        <div *ngIf="itemForm.get('name')?.invalid && itemForm.get('name')?.touched" class="error-message">
          Name is required.
        </div>
      </div>

      <div class="form-group">
        <label for="price">Price:</label>
        <input type="number" id="price" formControlName="price" required>
        <div *ngIf="itemForm.get('price')?.invalid && itemForm.get('price')?.touched" class="error-message">
          Price is required and must be a number.
        </div>
      </div>

      <div class="form-group">
        <label for="image">Image URL:</label>
        <input type="text" id="image" formControlName="image_url">
      </div>

      <button type="submit" [disabled]="itemForm.invalid">Add Item</button>
    </form>
  </div>
  <hr>

  <div *ngIf="editingItem">
    <h3>Edit {{ editingItem.name }}</h3>
    <form [formGroup]="itemForm" (ngSubmit)="saveEdit()">
      <div class="form-group">
        <label for="edit-name">Name:</label>
        <input type="text" id="edit-name" formControlName="name" required>
      </div>

      <div class="form-group">
        <label for="edit-price">Price:</label>
        <input type="number" id="edit-price" formControlName="price" required>
      </div>

      <div class="form-group">
        <label for="edit-image">Image URL:</label>
        <input type="text" id="edit-image" formControlName="image_url">
      </div>

      <button type="submit" [disabled]="itemForm.invalid">Save Changes</button>
      <button type="button" (click)="editingItem = null">Cancel</button>
    </form>
  </div>

</div>

<div *ngIf="showSnackbar" class="snackbar">
  {{ snackbarMessage }}
</div>

<app-footer></app-footer>